<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="820" viewBox="0 0 1400 820">
  <defs>
    <style>
      .bg{fill:#0f1117;}
      .box{fill:#161b22;stroke:#30363d;stroke-width:2;}
      .step{fill:#141a22;stroke:#2b313a;stroke-width:2;}
      .title{font:700 18px 'Segoe UI',Arial,sans-serif;fill:#e6edf3;}
      .h{font:700 14px 'Segoe UI',Arial,sans-serif;fill:#e6edf3;}
      .t{font:400 13px 'Segoe UI',Arial,sans-serif;fill:#c9d1d9;}
      .s{font:400 12px 'Segoe UI',Arial,sans-serif;fill:#a7b0ba;}
      .accent{fill:#7b6cff;}
      .accentTxt{font:800 13px 'Segoe UI',Arial,sans-serif;fill:#0b0e14;}
      .flow{stroke:#7b6cff;stroke-width:3;fill:none;}
      .side{stroke:#8b949e;stroke-width:2;fill:none;stroke-dasharray:7 6;}
    </style>
    <marker id="arr" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M0,0 L12,6 L0,12 Z" fill="#7b6cff"/>
    </marker>
    <marker id="arrG" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M0,0 L12,6 L0,12 Z" fill="#8b949e"/>
    </marker>
  </defs>

  <rect class="bg" x="0" y="0" width="1400" height="820"/>
  <text class="title" x="40" y="52">Architecture — flux runtime (exécution)</text>
  <text class="s" x="40" y="74">Vue “ce qui se passe quand l’utilisateur clique Exécuter”.</text>

  <!-- Actors -->
  <rect class="box" x="60" y="110" width="380" height="90" rx="14"/>
  <rect class="accent" x="60" y="110" width="380" height="28" rx="14"/>
  <text class="accentTxt" x="76" y="130">Utilisateur + interface</text>
  <text class="t" x="76" y="160">Saisie paramètres → clic Exécuter</text>

  <rect class="box" x="490" y="110" width="380" height="90" rx="14"/>
  <rect class="accent" x="490" y="110" width="380" height="28" rx="14"/>
  <text class="accentTxt" x="506" y="130">lanceur</text>
  <text class="t" x="506" y="160">Valide, choisit le mode, orchestre</text>

  <rect class="box" x="920" y="110" width="420" height="90" rx="14"/>
  <rect class="accent" x="920" y="110" width="420" height="28" rx="14"/>
  <text class="accentTxt" x="936" y="130">moteur (réseau + backpp)</text>
  <text class="t" x="936" y="160">Calcul, mise à jour, score</text>

  <!-- Steps timeline -->
  <text class="h" x="60" y="250">Étapes</text>

  <rect class="step" x="60" y="280" width="1280" height="70" rx="14"/>
  <text class="h" x="80" y="310">1) Lire config / dataset</text>
  <text class="t" x="80" y="332">data_loader fournit (X, D) ; service_parametres charge/sauvegarde si besoin</text>

  <rect class="step" x="60" y="370" width="1280" height="90" rx="14"/>
  <text class="h" x="80" y="400">2) Initialiser le réseau</text>
  <text class="t" x="80" y="422">réseau.cree_reso() → struct_reso initial</text>
  <text class="t" x="80" y="444">Option: set_reso(...) si on impose des W/B/X/D</text>

  <rect class="step" x="60" y="480" width="1280" height="110" rx="14"/>
  <text class="h" x="80" y="510">3) Exécuter selon le mode</text>
  <text class="t" x="80" y="532">Généralisation: forward sur jeu test</text>
  <text class="t" x="80" y="554">Validation: forward + score, sans update</text>
  <text class="t" x="80" y="576">Apprentissage: backpp.resolution(...) sur i itérations / k époques</text>

  <rect class="step" x="60" y="610" width="1280" height="90" rx="14"/>
  <text class="h" x="80" y="640">4) Publier résultats</text>
  <text class="t" x="80" y="662">Retourner score + métriques au lanceur → MAJ UI</text>
  <text class="t" x="80" y="684">Exporter une ligne dans parametres.txt (service_parametres)</text>

  <!-- Flow arrows between actors -->
  <path class="flow" marker-end="url(#arr)" d="M440,155 C455,155 470,155 490,155"/>
  <path class="flow" marker-end="url(#arr)" d="M870,155 C890,155 905,155 920,155"/>

  <!-- Side interactions -->
  <path class="side" marker-end="url(#arrG)" d="M680,200 C680,240 220,240 220,280"/>
  <text class="s" x="240" y="238">(option) relire config</text>

  <path class="side" marker-end="url(#arrG)" d="M680,200 C680,250 1200,250 1200,610"/>
  <text class="s" x="1020" y="238">(option) export parametres</text>

  <!-- Footer -->
  <text class="s" x="40" y="804">Conseil: backpp et réseau retournent des données; toute I/O (fichiers/console/UI) reste dans service/lanceur/interface.</text>
</svg>
