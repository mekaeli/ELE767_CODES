<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="820" viewBox="0 0 1400 820">
  <defs>
    <style>
      .bg{fill:#0f1117;}
      .box{fill:#161b22;stroke:#30363d;stroke-width:2;}
      .lane{fill:#0f1520;stroke:#243041;stroke-width:2;}
      .title{font:700 18px 'Segoe UI',Arial,sans-serif;fill:#e6edf3;}
      .h{font:700 14px 'Segoe UI',Arial,sans-serif;fill:#e6edf3;}
      .t{font:400 13px 'Segoe UI',Arial,sans-serif;fill:#c9d1d9;}
      .s{font:400 12px 'Segoe UI',Arial,sans-serif;fill:#a7b0ba;}
      .accent{fill:#7b6cff;}
      .accentTxt{font:800 13px 'Segoe UI',Arial,sans-serif;fill:#0b0e14;}
      .ok{stroke:#7b6cff;stroke-width:2.5;fill:none;}
      .bad{stroke:#ff6b6b;stroke-width:2.5;fill:none;stroke-dasharray:7 6;}
    </style>
    <marker id="arr" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M0,0 L12,6 L0,12 Z" fill="#7b6cff"/>
    </marker>
    <marker id="arrBad" markerWidth="12" markerHeight="12" refX="10" refY="6" orient="auto">
      <path d="M0,0 L12,6 L0,12 Z" fill="#ff6b6b"/>
    </marker>
  </defs>

  <rect class="bg" x="0" y="0" width="1400" height="820"/>

  <text class="title" x="40" y="52">Architecture — dépendances autorisées (clean)</text>
  <text class="s" x="40" y="74">But: empêcher le couplage UI↔core et garder backpp/réseau testables.</text>

  <!-- Lanes -->
  <rect class="lane" x="40" y="110" width="1320" height="170" rx="16"/>
  <rect class="lane" x="40" y="300" width="1320" height="220" rx="16"/>
  <rect class="lane" x="40" y="540" width="1320" height="240" rx="16"/>
  <text class="h" x="62" y="140">UI</text>
  <text class="h" x="62" y="330">Orchestration</text>
  <text class="h" x="62" y="570">Core + I/O</text>

  <!-- UI boxes -->
  <rect class="box" x="90" y="160" width="300" height="90" rx="14"/>
  <rect class="accent" x="90" y="160" width="300" height="28" rx="14"/>
  <text class="accentTxt" x="106" y="180">interface</text>
  <text class="t" x="106" y="210">Widgets, contrôles, événements</text>

  <rect class="box" x="430" y="160" width="300" height="90" rx="14"/>
  <text class="h" x="448" y="190">layout</text>
  <text class="t" x="448" y="220">Styles, tailles, placement</text>

  <!-- Orchestration -->
  <rect class="box" x="90" y="360" width="640" height="130" rx="14"/>
  <rect class="accent" x="90" y="360" width="640" height="28" rx="14"/>
  <text class="accentTxt" x="106" y="380">lanceur</text>
  <text class="t" x="106" y="412">Orchestre les modes (généralisation/validation/apprentissage)</text>
  <text class="t" x="106" y="436">Appelle loader/service/core, puis renvoie score/état à l’UI</text>

  <!-- Core + IO -->
  <rect class="box" x="90" y="610" width="280" height="120" rx="14"/>
  <text class="h" x="108" y="642">data_loader</text>
  <text class="t" x="108" y="672">Lecture/formatage données</text>
  <text class="t" x="108" y="696">Fournit (X, D)</text>

  <rect class="box" x="410" y="610" width="280" height="120" rx="14"/>
  <text class="h" x="428" y="642">service_parametres</text>
  <text class="t" x="428" y="672">Format/déformat</text>
  <text class="t" x="428" y="696">Gère parametres.txt</text>

  <rect class="box" x="730" y="610" width="280" height="120" rx="14"/>
  <text class="h" x="748" y="642">réseau</text>
  <text class="t" x="748" y="672">Crée / init / affiche</text>
  <text class="t" x="748" y="696">Expose struct_reso</text>

  <rect class="box" x="1050" y="610" width="280" height="120" rx="14"/>
  <text class="h" x="1068" y="642">backpp</text>
  <text class="t" x="1068" y="672">1 cycle: forward/backprop</text>
  <text class="t" x="1068" y="696">Retourne résultats (sans UI)</text>

  <rect class="box" x="1050" y="560" width="280" height="40" rx="14"/>
  <text class="h" x="1068" y="586">fct_dactivation</text>

  <!-- Allowed dependencies (purple) -->
  <!-- interface -> layout -->
  <path class="ok" marker-end="url(#arr)" d="M390,205 C405,205 415,205 430,205"/>
  <!-- interface -> lanceur -->
  <path class="ok" marker-end="url(#arr)" d="M240,250 C240,300 240,320 240,360"/>
  <!-- lanceur -> loader/service/reseau/backpp -->
  <path class="ok" marker-end="url(#arr)" d="M230,490 C230,540 230,560 230,610"/>
  <path class="ok" marker-end="url(#arr)" d="M390,455 C420,505 470,540 520,610"/>
  <path class="ok" marker-end="url(#arr)" d="M540,490 C650,545 760,575 860,610"/>
  <path class="ok" marker-end="url(#arr)" d="M650,455 C820,505 1020,545 1120,610"/>
  <!-- backpp -> fct_dactivation -->
  <path class="ok" marker-end="url(#arr)" d="M1190,610 C1190,595 1190,585 1190,600"/>
  <path class="ok" marker-end="url(#arr)" d="M1190,600 C1190,590 1190,585 1190,590"/>

  <!-- Disallowed examples (red dashed) -->
  <path class="bad" marker-end="url(#arrBad)" d="M1180,650 C980,520 500,420 300,230"/>
  <text class="s" x="820" y="500" fill="#ff6b6b">Interdit: backpp → UI (affichage direct)</text>

  <path class="bad" marker-end="url(#arrBad)" d="M560,205 C650,260 820,380 1060,650"/>
  <text class="s" x="610" y="260" fill="#ff6b6b">Interdit: layout → core</text>

  <!-- Notes -->
  <text class="s" x="40" y="804">Règle: UI ne connaît que lanceur + layout. Le core (réseau/backpp) ne dépend jamais de l’UI; il retourne des données.</text>
</svg>
